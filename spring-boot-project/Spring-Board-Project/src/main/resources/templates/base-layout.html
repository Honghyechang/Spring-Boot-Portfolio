<!DOCTYPE html>

<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"

th:fragment="layout(content)"
>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>스프링 부트 게시판</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          crossorigin="anonymous">
</head>
<body>
<nav class="navbar navbar-expand bg-dark" data-bs-theme="dark">
    <div class="container">
        <a class="navbar-brand"  th:href="@{/article/list}">
            <img th:src="@{/images/spring.svg}" width="30" height="30" class="d-inline-block align-text-top">
               스프링 부트 게시판
        </a>

        <ul class="navbar-nav">
            <!--        1)로그인 안했을경우 로그인,회원가입 보여주기-->
            <li sec:authorize="isAnonymous()" class="nav-item">
                <a th:href="@{/login}" class="nav-link">로그인</a>
            </li>

            <li sec:authorize="isAnonymous()" class="nav-item">
                <a th:href="@{/signup}" class="nav-link">회원가입</a>
            </li>


            <!--        2)관리자인 경우 관리 ->클릭시 회원관리로 이동-->
            <li sec:authorize="hasAuthority('ROLE_ADMIN')" class="nav-item dropdown">
<!--                <a>인 관리가 보이며 이것을 클릭하며 아래 드랍 메뉴가 보인다-->
                <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    관리
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a th:href="@{/member/list}">회원관리</a>
                    </li>
                </ul>

            </li>





            <!--        3)로그인 했을경우 사용자 정보-> 클릭 시 패스워드변경, 로그아웃 페이지 정보가 드랍으로 보여주고 이동-->
            <li sec:authorize="isAuthenticated()" class="nav-item dropdown">
                <!--                <a>인 관리가 보이며 이것을 클릭하며 아래 드랍 메뉴가 보인다-->
                <a class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown" aria-expanded="false" sec:authentication="principal.displayName">
                    이름
                </a>
                <ul class="dropdown-menu">
                    <li>
                        <a th:href="@{/password}">비밀번호 변경</a>
                    </li>

                    <li>
                        <a th:href="@{/logout}">로그아웃</a>
                    </li>
                </ul>

            </li>

        </ul>



    </div>

</nav>
<div th:replace="${content}">내용 대체</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
</body>
</html>




<!--요청하신 대로 두 개의 Thymeleaf 파일 구조와 사용 방식에 대해 상세하게 분석 및 정리해 드리겠습니다. 이 구조는 Spring Boot와 Thymeleaf를 이용한 웹 애플리케이션에서 **재사용성이 높은 레이아웃 시스템**을 구축하는 표준적인 방법입니다.-->

<!--두 파일의 관계와 핵심 기능을 나누어 설명하겠습니다.-->

<!-- -&#45;&#45;&#45;&#45;-->

<!--## 💻 스프링 부트 & 타임리프 레이아웃 분석-->

<!--### 1\. `base-layout.html` (레이아웃 템플릿)-->

<!--이 파일은 **웹 페이지의 뼈대**를 정의하며, 모든 페이지에서 공통으로 사용되는 네비게이션바, 푸터, 외부 리소스(CSS, JS) 링크 등을 담고 있습니다.-->

<!--#### A. 핵심 기능 및 정의-->

<!--| 기능 | 코드 | 설명 |-->
<!--| :-&#45;&#45; | :-&#45;&#45; | :-&#45;&#45; |-->
<!--| **레이아웃 프래그먼트 정의** | `th:fragment="layout(content)"` | 이 파일이 다른 템플릿 파일에서 \*\*`layout`\*\*이라는 이름으로 호출될 수 있도록 정의합니다. `(content)`는 **다른 파일로부터 받을 내용**을 지정하는 매개변수입니다. |-->
<!--| **내용 삽입 영역** | `<div th:replace="${content}">` | `layout` 프래그먼트를 호출할 때 받은 매개변수 (`content`)의 내용을 이 위치에 \*\*삽입(replace)\*\*합니다. 즉, 페이지의 실제 내용이 들어가는 영역입니다. |-->
<!--    | **외부 리소스** | `<link href="...">` | Bootstrap CSS를 로드하여 페이지 전체의 스타일링을 담당합니다. |-->
<!--    | **동적 기능 (JS)** | `<script src=".../bootstrap.bundle.min.js">` | 드롭다운(`dropdown-toggle`)과 같은 **Bootstrap 동적 기능**을 활성화하는 JavaScript 파일을 로드합니다. (Popper.js가 포함된 번들 버전 사용) |-->

<!--#### B. 네비게이션바 (Navbar) 기능 분석-->

<!--네비게이션바는 **Spring Security (`sec:authorize`)** 기능을 이용해 사용자 인증 상태에 따라 항목이 동적으로 나타납니다.-->

<!--| 네비게이션 항목 | 조건 (`sec:authorize`) | 설명 |-->
<!--| :-&#45;&#45; | :-&#45;&#45; | :-&#45;&#45; |-->
<!--| **브랜드 로고/이름** | `th:href="@{/article/list}"` | 이미지나 텍스트를 클릭하면 `/article/list` (게시글 목록)로 이동합니다. (메인 페이지 역할) |-->
<!--| **로그인/회원가입** | `isAnonymous()` | \*\*비로그인 사용자(익명 사용자)\*\*에게만 '로그인' 및 '회원가입' 링크를 보여줍니다. |-->
<!--| **관리 드롭다운** | `hasAuthority('ROLE_ADMIN')` | **`ROLE_ADMIN`** 권한을 가진 **관리자**에게만 '관리' 드롭다운 메뉴를 보여주며, 하위 메뉴로 **`회원관리`**(`/member/list`)가 있습니다. |-->
<!--| **사용자 정보 드롭다운** | `isAuthenticated()` | **로그인된 사용자**에게만 드롭다운 메뉴를 보여줍니다. |-->
<!--| **사용자 이름** | `sec:authentication="principal.displayName"` | 드롭다운 토글 버튼에 \*\*로그인한 사용자의 이름(displayName)\*\*을 동적으로 표시합니다. |-->
<!--| **로그인 메뉴** | - | 하위 메뉴로 **`비밀번호 변경`** (`/password`)과 **`로그아웃`** (`/logout`)이 제공됩니다. |-->

<!-- -&#45;&#45;&#45;&#45;-->

<!--### 2\. `contents-page.html` (내용 템플릿)-->

<!--이 파일은 특정 페이지에 고유한 **실제 내용**을 정의하며, `base-layout.html`을 호출하여 **프레그먼트 형태로 본인의 내용을 전달**하는 역할을 합니다.-->

<!--#### A. 핵심 기능 및 정의-->

<!--| 기능 | 코드 | 설명 |-->
<!--| :-&#45;&#45; | :-&#45;&#45; | :-&#45;&#45; |-->
<!--| **레이아웃 호출 및 내용 전달** | `th:replace="~{/base-layout::layout( ~{::section} )}"` | **이것이 레이아웃을 사용하는 핵심 방법입니다.**<br>이 템플릿의 전체 내용을 `base-layout.html`의 **`layout`** 프래그먼트로 전달하되, 전달하는 내용은 **현재 파일 내의 `section` 프래그먼트**(`~{::section}`)입니다. |-->
<!--| **내용 프래그먼트 정의** | `<section th:fragment="section">` | 이 `section` 태그 내부에 **페이지의 고유 콘텐츠**를 작성합니다. 이 부분이 `base-layout.html`의 `th:replace="${content}"` 위치로 삽입됩니다. |-->
<!--| **페이지 콘텐츠** | `<h2 sec:authorize="...">` 등 | 로그인 상태에 따라 사용자에게 환영 메시지를 보여주거나, 권한 정보를 표시하는 등 **이 페이지에서만 보여줄 로직**을 담고 있습니다. |-->
<!--| **동적 정보 표시** | `sec:authentication="principal.username"` | 로그인한 사용자의 \*\*아이디(이메일)\*\*나 **권한 목록** (`principal.authorities`) 같은 상세 정보를 보여줍니다. |-->

<!--#### B. 전체적인 작동 흐름-->

<!--1.  사용자가 `/some-page` 요청을 하면 스프링 부트 컨트롤러가 `contents-page.html` 템플릿을 실행합니다.-->
<!--2.  `contents-page.html`은 `th:replace` 구문을 만나 \*\*`base-layout.html`\*\*을 호출합니다.-->
<!--3.  호출 시 `contents-page.html`은 본인의 `section` 내용을 매개변수 (`content`)로 \*\*`base-layout.html`\*\*에 넘겨줍니다.-->
<!--4.  `base-layout.html`은 `<nav>`와 `<head>` 등의 뼈대를 렌더링하다가, `<div th:replace="${content}">` 위치에서 전달받은 `section` 내용을 삽입합니다.-->
<!--5.  최종적으로는 **고정된 네비게이션바와 동적인 내용 영역이 결합된 완전한 HTML 페이지**가 사용자에게 응답됩니다.-->